% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_threatened_ecosystems_protection.R
\name{make_threatened_ecosystems_protection}
\alias{make_threatened_ecosystems_protection}
\title{Create a Threatened Ecosystems Raster Based on Integrity or Degradation}
\usage{
make_threatened_ecosystems_protection(
  ecosystems_sf,
  group_attribute,
  pus,
  boundary_layer,
  integrity_raster,
  integrity_type = c("eii", "degraded"),
  iso3 = NULL,
  output_path = NULL
)
}
\arguments{
\item{ecosystems_sf}{sf. Polygons representing ecosystems.}

\item{group_attribute}{character. Column name used to group/dissolve ecosystems (e.g., \code{"eco_id"} or \code{"get_id"}).}

\item{pus}{SpatRaster. Planning unit raster used for alignment and rasterization.}

\item{boundary_layer}{sf. National boundary used to calculate the median integrity value if \code{integrity_type = "eii"}.}

\item{integrity_raster}{SpatRaster. Raster representing either continuous integrity (e.g., EII) or binary degraded areas.}

\item{integrity_type}{character. One of \code{"eii"} (default) or \code{"degraded"}, indicating how to interpret the integrity raster.}

\item{iso3}{character, optional. ISO3 code used for naming output files (e.g., \code{"KEN"}).}

\item{output_path}{character, optional. Directory to write the output raster as a GeoTIFF.}
}
\value{
A \code{SpatRaster} with one layer: \code{"threatened_ecosystems"}, with values from 0 to 100.
Higher values indicate greater ecosystem degradation or threat.
}
\description{
This generic function calculates ecosystem-level threat scores based on the
proportion of degraded or low-integrity land within each ecosystem polygon.
It supports either an EII-style continuous integrity raster (thresholded using
the national median) or a binary degraded areas raster.
}
\details{
The threat score is calculated as the percentage of each ecosystem area that is
below the integrity threshold (i.e., not intact), and rasterized by planning unit.
}
\examples{
\dontrun{
# Using EII (Ecological Integrity Index)
threatened_raster_eii <- make_threatened_ecosystems_protection(
  ecosystems_sf = my_ecosystems,
  group_attribute = "eco_id",
  pus = planning_units,
  boundary_layer = national_boundary,
  integrity_raster = eii_raster,
  integrity_type = "eii",
  iso3 = "KEN",
  output_path = "outputs"
)

# Using binary degraded areas raster (1 = degraded, 0 = intact)
threatened_raster_degraded <- make_threatened_ecosystems_protection(
  ecosystems_sf = my_ecosystems,
  group_attribute = "eco_id",
  pus = planning_units,
  boundary_layer = national_boundary,
  integrity_raster = degraded_raster,
  integrity_type = "degraded",
  iso3 = "KEN"
)
}
}
