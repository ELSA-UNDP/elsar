% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{median_from_rast}
\alias{median_from_rast}
\title{Compute median from a SpatRaster using its GDAL PAM side-car histogram}
\usage{
median_from_rast(r)
}
\arguments{
\item{r}{A \code{SpatRaster} (from \strong{terra}) whose underlying file has
a GDAL PAM side-car XML (e.g. \code{raster.tif.aux.xml}).}
}
\value{
A single numeric value: the median of the raster (bucket midpoint).
}
\description{
Extracts the histogram stored in the GDAL PAM side-car XML file
(e.g. \code{raster.tif.aux.xml}) and computes the exact median value
by finding the bucket midpoint where the cumulative count reaches 50\%.
}
\details{
Before running this function, you must generate the histogram sideâ€‘car:
in a terminal, run:

\if{html}{\out{<div class="sourceCode bash">}}\preformatted{gdalinfo -hist /path/to/your.tif
}\if{html}{\out{</div>}}

This computes and stores the histogram in \verb{/path/to/your.tif.aux.xml}.
Once the side-car exists, calling this function reads the stored
\verb{<Histogram>} data without re-scanning pixel values and returns
the exact median bucket midpoint.
}
\examples{
\dontrun{
library(terra)
r <- rast("eii_2023.tif")
# First, in the shell:
#   gdalinfo -hist eii_2023.tif
med <- median_from_rast(r)
}

}
