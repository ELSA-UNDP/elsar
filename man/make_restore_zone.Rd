% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_restore_zone.R
\name{make_restore_zone}
\alias{make_restore_zone}
\title{Generate a Degraded Areas Layer for Restoration Planning}
\usage{
make_restore_zone(
  iso3,
  pus,
  sdg_degradation_input = NULL,
  agricultural_areas_input = NULL,
  built_areas_input = NULL,
  lulc_raster = NULL,
  hii_input = NULL,
  forest_cover_input = NULL,
  sdg_threshold = 0.1,
  lulc_threshold = 0.1,
  hii_threshold = 4,
  forest_threshold = 0.1,
  agriculture_lulc_value = 4,
  built_area_lulc_value = 7,
  filter_patch_size = TRUE,
  min_patch_size = 10,
  output_path = NULL
)
}
\arguments{
\item{iso3}{Character. ISO3 country code (e.g., "CHL").}

\item{pus}{SpatRaster. Planning units raster used to define resolution and extent.}

\item{sdg_degradation_input}{SpatRaster. SDG degradation raster input.}

\item{agricultural_areas_input}{SpatRaster or NULL. Optional input raster for agricultural areas. If NULL, \code{lulc_raster} must be provided.}

\item{built_areas_input}{SpatRaster or NULL. Optional input raster for built-up areas. If NULL, \code{lulc_raster} must be provided.}

\item{lulc_raster}{SpatRaster or NULL. LULC raster used to derive agriculture/built areas if not directly provided. Assumes using the ESRI 10m LULC dataset.}

\item{hii_input}{SpatRaster. Human Industrial Footprint Index (HII) raster.}

\item{forest_cover_input}{SpatRaster or NULL. Optional forest cover raster used to create \code{restore_zone_v2}. If NULL, only \code{restore_zone_v1} is created.}

\item{sdg_threshold}{Numeric. Threshold for SDG degradation to classify as degraded (default: 0.1).}

\item{lulc_threshold}{Numeric. Threshold for agri/built classification (default: 0.1).}

\item{hii_threshold}{Numeric. HII threshold for defining high human pressure (default: 4).}

\item{forest_threshold}{Numeric. Minimum forest cover value to retain in restore zone 2 (default: 0.1).}

\item{agriculture_lulc_value}{Integer. LULC value representing agriculture if derived from \code{lulc_raster} (default: 4).}

\item{built_area_lulc_value}{Integer. LULC value representing built-up areas if derived from \code{lulc_raster} (default: 7).}

\item{filter_patch_size}{Logical. Whether to remove small isolated patches (default: TRUE).}

\item{min_patch_size}{Integer. Minimum number of connected pixels to retain (default: 10).}

\item{output_path}{Character or NULL. Directory to save output rasters. If NULL, outputs are returned but not saved (default: NULL).}
}
\value{
A \code{SpatRaster} with one or two layers:
\itemize{
\item \code{restore_zone_v1}: Degraded areas based on SDG, LULC, and HII thresholds
\item \code{restore_zone_v2}: \code{v1} masked by forest coverage (only if \code{forest_cover_input} is provided)
}
}
\description{
This function identifies degraded areas for potential restoration based on a combination of:
\itemize{
\item \strong{SDG productivity degradation data}
\item \strong{Agricultural and built-up areas} (either provided or derived from a LULC raster)
\item \strong{Human Industrial Footprint Index (HII)}
\item \strong{Forest ecosystems coverage} (optional, used to create \code{restore_zone_v2})
}
}
\details{
The function applies user-defined thresholds to generate one or two outputs:
\itemize{
\item \code{restore_zone_v1}: Based on SDG degradation, agriculture, built-up, and HII thresholds
\item \code{restore_zone_v2}: Same as \code{v1} but masked by forest extent (only created if forest layer provided)
}

If \code{output_path} is provided, the intermediate layers and final output are saved as Cloud Optimized GeoTIFFs.
}
\examples{
\dontrun{
# Example 1: With forest cover layer (creates both v1 and v2)
restore_zone <- make_restore_zone(
  iso3 = "CHL",
  pus = planning_units,
  sdg_degradation_input = sdg_raster,
  agricultural_areas_input = NULL,
  built_areas_input = NULL,
  lulc_raster = lulc_input,
  hii_input = hii_raster,
  forest_cover_input = forest_raster,
  output_path = "outputs/"
)

# Example 2: Without forest cover layer (creates only v1)
restore_zone <- make_restore_zone(
  iso3 = "CHL",
  pus = planning_units,
  sdg_degradation_input = sdg_raster,
  agricultural_areas_input = ag_areas_input,
  built_areas_input = built_areas_input,
  lulc_raster = NULL,
  hii_input = hii_raster,
  forest_cover_input = NULL,
  output_path = "outputs/"
)

# Example 3: Using pre-computed agricultural and built areas
restore_zone <- make_restore_zone(
  iso3 = "BRA",
  pus = planning_units,
  sdg_degradation_input = sdg_raster,
  agricultural_areas_input = ag_raster,
  built_areas_input = built_raster,
  hii_input = hii_raster,
  forest_cover_input = forest_raster
)
}
}
