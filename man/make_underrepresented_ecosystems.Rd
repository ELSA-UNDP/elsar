% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_underrepresented_ecosystems.R
\name{make_underrepresented_ecosystems}
\alias{make_underrepresented_ecosystems}
\title{Create a Representation Gap Raster for Ecosystems}
\usage{
make_underrepresented_ecosystems(
  ecosystems_sf,
  group_attribute,
  target_percent = 30,
  protected_areas_sf,
  pus,
  iso3 = NULL,
  output_path = NULL
)
}
\arguments{
\item{ecosystems_sf}{\code{sf} object. Polygon features representing ecosystems, clipped to the analysis area.}

\item{group_attribute}{\code{character}. Column name in \code{ecosystems_sf} used to group features (e.g., "econame" or "get_id").}

\item{target_percent}{\code{numeric}. Target percentage of protection for each ecosystem group (default = 30).}

\item{protected_areas_sf}{\code{sf} or \code{SpatVector}. Protected areas dataset to be used in the gap calculation.}

\item{pus}{\code{SpatRaster}. Raster of planning units (e.g., from \code{make_planning_units()}), used as the target grid for rasterization.}

\item{iso3}{\code{character}, optional. ISO3 country code used for naming output files (e.g., "BRA").}

\item{output_path}{\code{character}, optional. Directory path to save the output raster as a GeoTIFF.}
}
\value{
A \code{SpatRaster} with one layer: \code{"underrepresented_ecosystems"}, showing the maximum gap (0 to target_percent) per planning unit.
}
\description{
This function calculates the protection gap for a given set of ecosystem features by:
\enumerate{
\item dissolving features based on a grouping attribute,
\item intersecting them with protected areas,
\item calculating the gap between the current protection and a target percentage, and
\item rasterizing the average underrepresentation value to a planning unit raster.
}
}
\details{
The output highlights spatial priorities for ecosystem representation based on protection shortfall.
}
\examples{
\dontrun{
gap_raster <- make_underrepresented_ecosystems(
  ecosystems_sf = my_ecosystem_polygons,
  group_attribute = "eco_type",
  target_percent = 30,
  protected_areas_sf = wdpa,
  pus = planning_units,
  iso3 = "KEN",
  output_path = "outputs"
)
}

}
