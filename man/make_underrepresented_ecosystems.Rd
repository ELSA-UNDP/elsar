% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_underrepresented_ecosystems.R
\name{make_underrepresented_ecosystems}
\alias{make_underrepresented_ecosystems}
\title{Create Underrepresented Ecosystems Raster Based on IUCN GET and Protection Gaps}
\usage{
make_underrepresented_ecosystems(
  iucn_get_sf,
  iso3,
  pus,
  boundary_layer,
  current_protected_areas,
  iucn_get_prefixes = NULL,
  include_minor_occurrence = TRUE,
  output_path = NULL
)
}
\arguments{
\item{iucn_get_sf}{sf object. IUCN GET polygons already loaded and clipped to the analysis area.}

\item{iso3}{Character. ISO3 country code (e.g., "KEN").}

\item{pus}{A \code{SpatRaster}. Raster of planning units (e.g., from \code{make_planning_units()}).}

\item{boundary_layer}{An \code{sf} object of the national boundary used to clip ecosystems.}

\item{current_protected_areas}{An \code{sf} or \code{SpatVector} object representing protected areas.}

\item{iucn_get_prefixes}{Optional character vector. Filters the \code{sf} input by prefix (e.g., c("T", "F")).}

\item{include_minor_occurrence}{Logical. Whether to include ecosystems marked as "minor" (default = TRUE).}

\item{output_path}{Optional character. Directory path to save the output raster.}
}
\value{
A normalized \code{SpatRaster} layer representing the average protection gap across ecosystems.
}
\description{
This function calculates the representation gap of ecosystems defined in the IUCN Global Ecosystem Typology (GET)
dataset, identifying those that fall short of a 30\% protection target. The resulting raster layer indicates
the average degree of underrepresentation across each planning unit.
}
\details{
The function uses spatial overlays to calculate the proportion of each ecosystem that is currently protected,
computes the gap toward a 30\% target, and then rasterizes this value onto the planning units. The output raster
can be used to prioritise areas for protection of underrepresented ecosystems.
}
\examples{
\dontrun{
underrep <- make_underrepresented_ecosystems(
  iucn_get_sf = iucn_data,
  boundary_layer = boundary_layer,
  current_protected_areas = protected_areas,
  iso3 = "KEN",
  pus = planning_units,
  output_path = "outputs"
)
}
}
