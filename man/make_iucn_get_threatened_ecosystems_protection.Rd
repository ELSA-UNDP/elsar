% Generated by roxygen2: do not edit by hand
% Please edit documentation in
%   R/make_iucn_get_threatened_ecosystems_protection.R
\name{make_iucn_get_threatened_ecosystems_protection}
\alias{make_iucn_get_threatened_ecosystems_protection}
\title{Create Threatened Ecosystems (for Protection) Raster}
\usage{
make_iucn_get_threatened_ecosystems_protection(
  iso3,
  pus,
  boundary_layer,
  intactness_input,
  iucn_get_sf,
  iucn_get_prefixes = NULL,
  include_minor_occurrence = TRUE,
  output_path = NULL
)
}
\arguments{
\item{iso3}{Character. ISO3 country code (e.g., \code{"KEN"}) used for naming and processing.}

\item{pus}{SpatRaster. Planning units raster used for alignment and resolution.}

\item{boundary_layer}{sf. National boundary used for calculating the national median.}

\item{intactness_input}{SpatRaster. Ecological integrity raster.}

\item{iucn_get_sf}{sf. IUCN GET polygons already subset to the country.}

\item{iucn_get_prefixes}{Optional character vector. Ecosystem type prefixes to include (e.g., \code{"T"}, \code{"M"}).}

\item{include_minor_occurrence}{Logical. If FALSE, filters out ecosystems marked as minor (occurrence == 1).}

\item{output_path}{Character or NULL. Directory to write the output raster if desired.}
}
\value{
A normalized SpatRaster layer with ecosystem threat scores (0â€“100).
}
\description{
This function identifies threatened ecosystems by comparing ecological integrity (EII)
values against a national median. For each IUCN GET ecosystem, it calculates the area
of intact land (above the median) and expresses the ratio of intact to total area as a
threat score. These scores are then rasterized and returned as a continuous raster.
}
\examples{
\dontrun{
threatened <- make_iucn_get_threatened_ecosystems_protection(
  iso3 = "KEN",
  pus = planning_units,
  boundary_layer = sf::st_read("data/boundary.gpkg"),
  intactness_input = rast("data/intactness.tif"),
  iucn_get_sf = iucn_get_sf,
  output_path = "outputs"
)
}
}
