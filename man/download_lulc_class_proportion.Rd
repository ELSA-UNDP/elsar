% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gee_helpers.R
\name{download_lulc_class_proportion}
\alias{download_lulc_class_proportion}
\title{Download LULC Class Proportion Raster from GEE}
\usage{
download_lulc_class_proportion(
  boundary_layer,
  iso3,
  gee_project,
  output_dir = here::here(),
  lulc_product = c("esri_10m", "dynamic_world", "esa_worldcover"),
  class_name,
  class_values = NULL,
  year = NULL,
  pus,
  wait_time = 5,
  ...
)
}
\arguments{
\item{boundary_layer}{An \code{sf} object defining the spatial boundary of interest.}

\item{iso3}{Character. Three-letter ISO country code for filename generation.}

\item{gee_project}{Character. Google Earth Engine cloud project ID. This is
required and must be a valid GEE project you have access to. Find your
project ID in the \href{https://code.earthengine.google.com/}{GEE Code Editor}.}

\item{output_dir}{Character. Path to directory for saving the final raster file.
Defaults to project root via \code{here::here()}.}

\item{lulc_product}{Character. LULC product to use: "esri_10m" (default),
"dynamic_world", or "esa_worldcover".}

\item{class_name}{Character. Name of the class to extract proportion for.
Common values: "agriculture", "built_area", "trees", "forest_managed".}

\item{class_values}{Integer vector or NULL. Explicit class values to use.
If NULL, automatically determined from \code{lulc_product} and \code{class_name}.}

\item{year}{Numeric or NULL. Year for LULC data. If NULL, uses most recent.}

\item{pus}{SpatRaster. Planning units raster (required for aggregation).}

\item{wait_time}{Numeric. Maximum time in minutes to wait for the GEE export
to appear in Google Drive. Default is 5. Increase for large exports.}

\item{...}{Additional arguments passed to \code{\link[=download_gee_layer]{download_gee_layer()}}.}
}
\value{
A \code{SpatRaster} with class proportion values (0-1) at PU resolution,
with attribute \code{pre_aggregated = TRUE}.
}
\description{
Downloads a pre-computed class proportion raster from Google Earth Engine.
This function computes the proportion of a specific LULC class (e.g., agriculture,
built area) within each planning unit cell directly in GEE, avoiding the need
for expensive local resampling.
}
\details{
This function:
\enumerate{
\item Loads the LULC ImageCollection in GEE
\item Creates a binary mask where target class = 1, other classes = 0
\item Aggregates using mean reducer to get proportion per PU cell
\item Exports at PU resolution using CRS transform
}

The resulting raster can be used directly in consumer functions via the
\code{agricultural_areas_input}, \code{built_areas_input}, etc. parameters without
additional local processing.
}
\examples{
\dontrun{
# Download agriculture proportion at PU resolution
ag_prop <- download_lulc_class_proportion(
  boundary_layer = ghana_boundary,
  iso3 = "GHA",
  gee_project = "my-project",
  lulc_product = "esri_10m",
  class_name = "agriculture",
  pus = planning_units
)

# Use directly in make_protect_zone
protect <- make_protect_zone(
  agricultural_areas_input = ag_prop,
  ...
)

# Download built area proportion with explicit class values
built_prop <- download_lulc_class_proportion(
  boundary_layer = ghana_boundary,
  iso3 = "GHA",
  gee_project = "my-project",
  lulc_product = "esri_10m",
  class_name = "built_area",
  class_values = 7,  # ESRI built area class
  pus = planning_units
)
}
}
\seealso{
\code{\link[=download_lulc_data]{download_lulc_data()}}, \code{\link[=get_lulc_class_value]{get_lulc_class_value()}}
}
