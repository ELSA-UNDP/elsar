% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_iucn_ecosystems.R
\name{get_iucn_ecosystems}
\alias{get_iucn_ecosystems}
\title{Extract IUCN GET Ecosystems Vector Layers}
\usage{
get_iucn_ecosystems(
  iucn_get_directory,
  iso3,
  boundary_layer,
  pus,
  include_minor_occurence = TRUE,
  iucn_get_prefixes = NULL,
  output_path = NULL
)
}
\arguments{
\item{iucn_get_directory}{Character. Directory containing IUCN GET \code{.gpkg} files.}

\item{iso3}{Character. ISO3 country code used for naming the output (e.g., "KEN").}

\item{boundary_layer}{sf object. Vector polygon used to spatially clip features (usually country boundary).}

\item{pus}{SpatRaster. Planning units raster used to define spatial extent and target CRS.}

\item{iucn_get_prefixes}{Character vector of filename prefixes to include (e.g., c("T", "TF", "FM")) or NULL to include all \code{.gpkg} files.}

\item{output_path}{Character or NULL. If provided, writes the merged output to a GeoPackage.}

\item{include_minor_occurrence}{Logical. If FALSE, excludes features with minor occurrence (default: TRUE).}
}
\value{
An \code{sf} object containing merged and filtered IUCN GET ecosystem features with valid geometry.
}
\description{
This function reads and merges \code{.gpkg} vector files representing IUCN GET ecosystems
from a specified directory. It optionally filters files based on filename prefixes
(e.g., "T", "TF", "FM"), restricts features to those intersecting a country boundary,
reprojects them to match a planning units raster (\code{pus}), and removes ecosystems
marked as \verb{minor occurrence} if desired.
}
\details{
The layer ID (e.g., "F1.1") is derived from the source filename and added to each feature
for tracking. If \code{output_path} is provided, the final merged and filtered layer is saved
as a GeoPackage.
}
\examples{
\dontrun{
pus <- terra::rast("data/pus_raster.tif")
boundary <- sf::st_read("data/country_boundary.gpkg")
ecosystems <- get_iucn_ecosystems(
  iucn_get_directory = "data/iucn_layers",
  iso3 = "KEN",
  boundary_layer = boundary,
  pus = pus,
  iucn_get_prefixes = c("T", "TF"),
  include_minor_occurrence = FALSE,
  output_path = "outputs"
)
}
}
