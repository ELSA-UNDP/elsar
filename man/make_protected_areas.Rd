% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_protected_areas.R
\name{make_protected_areas}
\alias{make_protected_areas}
\title{Create a Binary or Fractional Raster of Protected Areas Aligned to Planning Units}
\usage{
make_protected_areas(
  pus,
  iso3,
  from_wdpa = TRUE,
  sf_in = NULL,
  download_path = NULL,
  status = c("Established", "Inscribed", "Designated"),
  site_type = "PA",
  pa_def = deprecated(),
  include_mab_designation = FALSE,
  buffer_points = TRUE,
  area_column = "REP_AREA",
  area_calc_crs = "ESRI:54009",
  n_quad_segs = 50,
  binary = TRUE,
  threshold = 0.1,
  force_update = FALSE,
  output_path = NULL
)
}
\arguments{
\item{pus}{SpatRaster. Planning units raster defining the output resolution and extent.}

\item{iso3}{Character. ISO3 country code (e.g., "CHL").}

\item{from_wdpa}{Logical. If \code{TRUE}, downloads protected area data using the
\pkg{wdpar} package. If \code{FALSE}, uses \code{sf_in}. Default is \code{TRUE}.}

\item{sf_in}{sf object or NULL. Protected area geometries to use when

\code{from_wdpa = FALSE}. Required if \code{from_wdpa = FALSE}.}

\item{download_path}{Character or NULL. Directory where WDPA data will be saved
or loaded from. Required if \code{from_wdpa = TRUE}.}

\item{status}{Character vector. Which \code{STATUS} values to include from WDPA data.
Valid values: "Designated", "Established", "Inscribed", "Proposed", "Adopted".
Default is \code{c("Established", "Inscribed", "Designated")}.}

\item{site_type}{Character vector. Values for the \code{SITE_TYPE} column in WDPA
data. Valid values: "PA" (Protected Area) or "OECM" (Other Effective
Area-based Conservation Measure). Default is \code{"PA"}. For backward
compatibility, numeric values 1 (PA) and 0 (OECM) are also accepted.}

\item{pa_def}{Deprecated. Use \code{site_type} instead. Kept for backward
compatibility.}

\item{include_mab_designation}{Logical. If \code{FALSE}, excludes UNESCO Man and

Biosphere (MAB) reserves. Default is \code{FALSE}.}

\item{buffer_points}{Logical. If \code{TRUE}, creates geodesic buffers around point
geometries using the area attribute. Default is \code{TRUE}.}

\item{area_column}{Character. Column name containing area values for buffering
point geometries. Default is \code{"REP_AREA"}.}

\item{area_calc_crs}{Character. CRS to use for buffer calculations.
Default is \code{"ESRI:54009"} (World Mollweide).}

\item{n_quad_segs}{Integer. Number of segments per quarter circle when creating
buffers. Default is \code{50}.}

\item{binary}{Logical. If \code{TRUE}, output is binary (0/1) based on \code{threshold}.
If \code{FALSE}, returns fractional coverage. Default is \code{TRUE}.}

\item{threshold}{Numeric. Coverage fraction threshold for binary classification.
Planning units with coverage above this value are classified as protected.
Only used when \code{binary = TRUE}. Default is \code{0.10}.}

\item{force_update}{Logical. If \code{TRUE}, forces re-download of WDPA data even
if cached. Default is \code{FALSE}.}

\item{output_path}{Character or NULL. Directory to save the output raster.
If NULL, the raster is returned but not saved.}
}
\value{
If \code{sf_in} was provided (i.e., \code{from_wdpa = FALSE}), returns a SpatRaster.
If data was downloaded from WDPA (\code{from_wdpa = TRUE}), returns a list with:
\describe{
\item{raster}{SpatRaster of protected areas}
\item{sf}{sf object of dissolved protected area polygons for reuse}
}
}
\description{
Generates a raster of protected areas for a given country, aligned to the planning
units. Data can be downloaded from the \href{https://www.protectedplanet.net/}{Protected Planet}
database via the \pkg{wdpar} package, or provided as an \code{sf} object.
}
\details{
All geometries are reprojected, dissolved to avoid double-counting overlaps, and
rasterized. The output can be binary (presence/absence based on a coverage threshold)
or fractional (proportion of each planning unit covered).
}
