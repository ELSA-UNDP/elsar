% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_protected_areas.R
\name{make_protected_areas}
\alias{make_protected_areas}
\title{Create a Binary or Fractional Raster of Protected Areas Aligned to Planning Units}
\usage{
make_protected_areas(
  from_wdpa = TRUE,
  iso3,
  download_path = NULL,
  sf_in,
  status = c("Established", "Inscribed", "Designated"),
  pa_def = 1,
  include_mab_designation = FALSE,
  buffer_points = TRUE,
  area_column = "REP_AREA",
  area_calc_crs = "ESRI:54009",
  nQuadSegs = 50,
  threshold = 0.1,
  binary = TRUE,
  return_sf = TRUE,
  force_update = FALSE,
  pus,
  output_path = NULL
)
}
\arguments{
\item{from_wdpa}{Logical. If \code{TRUE}, downloads protected area data using the \pkg{wdpar} package. If \code{FALSE}, uses \code{sf_in}.}

\item{iso3}{Character. ISO3 code for the country of interest.}

\item{download_path}{Character. Path where WDPA data will be saved or loaded from.}

\item{sf_in}{An \code{sf} object containing protected area geometries. Used only if \code{from_wdpa = FALSE}.}

\item{status}{Character vector. Which \code{STATUS} values to include from the WDPA data. Default is \code{c("Established", "Inscribed", "Designated")}.}

\item{pa_def}{Integer or vector of integers. Values for the \code{PA_DEF} column (1 = Protected Area; 0 = OECM). Only \code{1} is currently supported. Default is \code{1}.}

\item{include_mab_designation}{Logical. If \code{FALSE}, excludes Man and Biosphere (MAB) reserves.}

\item{buffer_points}{Logical. If \code{TRUE}, creates geodesic buffers around \code{POINT} and \code{MULTIPOINT} features using area attributes.}

\item{area_column}{Character. Column name indicating the area (used for buffering). Default is \code{"REP_AREA"}.}

\item{area_calc_crs}{Character. CRS to use for buffering operations. Default is \code{"ESRI:54009"} (World Mollweide).}

\item{nQuadSegs}{Integer. Number of segments per quarter circle for buffers. Default is \code{50}.}

\item{threshold}{Numeric. Fractional threshold for considering a planning unit as protected. Default is \code{0.10}. Used only if \code{binary = TRUE}.}

\item{binary}{Logical. If \code{TRUE}, output will be binary (0/1) based on \code{threshold}. If \code{FALSE}, returns fractional coverage raster. Default is \code{TRUE}.}

\item{return_sf}{Logical. If \code{TRUE}, assigns the dissolved individual polygons to \code{current_protected_area_sf} in the global environment for reuse. Default is \code{TRUE}.}

\item{force_update}{Logical. If \code{TRUE}, forces re-download of WDPA data. Default is \code{FALSE}.}

\item{pus}{A \code{SpatRaster} of planning units to which the protected areas will be aligned.}

\item{output_path}{Optional. File path where the resulting raster should be saved.}
}
\value{
A \code{SpatRaster} representing protected areas as binary presence/absence or fractional coverage.
}
\description{
This function generates a binary or fractional raster of protected areas for a given country, aligned to the planning units (\code{pus}). It optionally downloads the latest protected area data from the \href{https://www.protectedplanet.net/}{Protected Planet} database via the \pkg{wdpar} package or uses an input \code{sf} object. All geometries are reprojected, dissolved to avoid double-counting overlaps, and converted to individual polygons to improve spatial intersection performance. The raster output indicates the presence of protected areas in each planning unit (binary) or the fractional area covered.
}
