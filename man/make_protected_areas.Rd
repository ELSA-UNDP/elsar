% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_protected_areas.R
\name{make_protected_areas}
\alias{make_protected_areas}
\title{Create a Raster of Existing Protected Areas Aligned to Planning Units}
\usage{
make_protected_areas(
  from_wdpa = TRUE,
  iso3,
  download_path = NULL,
  sf_in,
  status = c("Established", "Inscribed", "Designated"),
  pa_def = 1,
  include_mab_designation = FALSE,
  buffer_points = TRUE,
  area_column = "REP_AREA",
  area_calc_crs = "ESRI:54009",
  nQuadSegs = 50,
  return_sf = TRUE,
  force_update = FALSE,
  pus,
  output_path = NULL
)
}
\arguments{
\item{from_wdpa}{Logical. If \code{TRUE}, downloads protected area data using the \pkg{wdpar} package. If \code{FALSE}, uses \code{sf_in}.}

\item{iso3}{Character. ISO3 code for the country of interest.}

\item{download_path}{Character. Path where WDPA data will be saved or loaded from.}

\item{sf_in}{An \code{sf} object containing protected area geometries. Used only if \code{from_wdpa = FALSE}.}

\item{status}{Character vector. Which \code{STATUS} values to include from the WDPA data. Default is \code{c("Established", "Inscribed", "Designated")}.}

\item{pa_def}{Integer or vector of integers. Values for the \code{PA_DEF} column (1 = Protected Area; 0 = OECM). Only 1 is currently supported. Default is \code{1}.}

\item{include_mab_designation}{Logical. If \code{FALSE}, excludes Man and Biosphere (MAB) reserves.}

\item{buffer_points}{Logical. If \code{TRUE}, creates geodesic buffers around \code{POINT} and \code{MULTIPOINT} features using area attributes.}

\item{area_column}{Character. Column name indicating the area (used for buffering). Default is \code{"REP_AREA"}.}

\item{area_calc_crs}{Character. CRS to use for buffering operations. Default is \code{"ESRI:54009"} (World Mollweide).}

\item{nQuadSegs}{Integer. Number of segments per quarter circle for buffers. Default is \code{50}.}

\item{return_sf}{Logical. If \code{TRUE}, assigns the dissolved individual polygons to \code{current_protected_area_sf} in the global environment for reuse. Default is \code{TRUE}.}

\item{force_update}{Logical. If \code{TRUE}, forces re-download of WDPA data. Default is \code{FALSE}.}

\item{pus}{A \code{SpatRaster} of planning units to which the protected areas will be aligned.}

\item{output_path}{Optional. File path where the resulting raster should be saved.}
}
\value{
A \code{SpatRaster} representing the fractional coverage of protected areas in each planning unit.
}
\description{
This function generates a raster of protected areas for a given country, aligned to the planning units (\code{pus}). It optionally downloads the latest protected area data from the \href{https://www.protectedplanet.net/}{Protected Planet} database via the \pkg{wdpar} package or uses an input \code{sf} object. All geometries are reprojected, dissolved to avoid double-counting overlaps, and converted to individual polygons to improve spatial intersection performance. The raster output represents the fractional area of each planning unit covered by protected areas.
}
\examples{
\dontrun{
boundary_proj <- make_boundary(
 boundary_in = boundary_dat,
 iso3 = "NPL",
 iso3_column = "iso3cd"
 )

pus <- make_planning_units(
 boundary_proj = boundary_proj,
 pu_size = NULL
 )

pa_raster <- make_protected_areas(
  iso3 = "NPL",
  download_path = here::here(),
  buffer_points = TRUE,
  pus = pus,
  force_update = TRUE
)
}
}
